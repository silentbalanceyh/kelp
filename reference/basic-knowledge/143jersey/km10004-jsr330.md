# KM10004 - JSR330 Details

Java依赖注入标准（JSR-330，Dependency Injection for Java）——该规范面向以来注入使用者，而对注入器实现、配置病没做详细要求。目前Spring、Guice已经开始兼容该规范，JSR-299（Contexts and Dependency Injection for Java EE platform）在依赖注入上也使用该规范。JSR-330规范并没按JSR惯例发布规范文档，只发布了规范API源代码。

## 1.javax.inject

包javax.inject制定了获取对象的一种方法，该方法和构造器、工厂、服务定位器（如JNDI）这些传统方法相比可以获得更好的可重用性、可测试性和可维护性——就是依赖注入。

在我们的程序中，很多类型依赖于其他类型，如Stopwatch可能依赖一个TimeSource，一些类型被另外一个类型依赖，我们把这些类型叫做依赖（物）。在运行时查找一个依赖实例的过程叫做解析依赖，如果找不到依赖的实现则称该依赖为不能满足的，并导致应用运行失败。

如果不使用依赖注入，对象的依赖解析有几种方式，最常见的就是通过编写直接调用构造函数的代码：

```java
class Stopwatch {
  final TimeSource timeSource;
  Stopwatch () {
    timeSource = new AtomicClock(...);
  }
  void start() { ... }
  long stop() { ... }
}
```

如果需要更有弹性一点，那么我们可以通过工厂或服务定位器实现：

```java
class Stopwatch { 
          final TimeSource timeSource; 
          Stopwatch () { 
              timeSource = DefaultTimeSource.getInstance(); 
          } 
          void start() { ... } 
          long stop() { ... } 
      }
```



